import{_ as Y,D as M}from"./QuestionBox.32c0c2ef.js";import{i as w,u as f,p as Z,l as C,q as ee,s as te,x as K,j as U,_ as re,o as b,b as O,a as ne,d as se,k as oe,e as y,f as k,w as ae,y as ie,t as le,z as ue,F as E,h as I,A as z}from"./index.185eb769.js";var J;const x=typeof window!="undefined",ce=e=>typeof e=="string",F=()=>{};x&&((J=window==null?void 0:window.navigator)==null?void 0:J.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function fe(e,t){function r(...n){e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return r}const q=e=>e();function de(e=q){const t=w(!0);function r(){t.value=!1}function n(){t.value=!0}return{isActive:t,pause:r,resume:n,eventFilter:(...s)=>{t.value&&e(...s)}}}function T(e){return ee()?(te(e),!0):!1}function pe(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:o=!1}=r;let s=null;const i=w(!1);function d(){s&&(clearInterval(s),s=null)}function c(){i.value=!1,d()}function a(){f(t)<=0||(i.value=!0,o&&e(),d(),s=setInterval(e,f(t)))}if(n&&x&&a(),Z(t)){const u=C(t,()=>{i.value&&x&&a()});T(u)}return T(c),{isActive:i,pause:c,resume:a}}var V=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,me=(e,t)=>{var r={};for(var n in e)_e.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&V)for(var n of V(e))t.indexOf(n)<0&&ve.call(e,n)&&(r[n]=e[n]);return r};function he(e,t,r={}){const n=r,{eventFilter:o=q}=n,s=me(n,["eventFilter"]);return C(e,fe(o,t),s)}var we=Object.defineProperty,ge=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t)=>{for(var r in t||(t={}))Q.call(t,r)&&B(e,r,t[r]);if(N)for(var r of N(t))X.call(t,r)&&B(e,r,t[r]);return e},Oe=(e,t)=>ge(e,ye(t)),Se=(e,t)=>{var r={};for(var n in e)Q.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&N)for(var n of N(e))t.indexOf(n)<0&&X.call(e,n)&&(r[n]=e[n]);return r};function xe(e,t,r={}){const n=r,{eventFilter:o}=n,s=Se(n,["eventFilter"]),{eventFilter:i,pause:d,resume:c,isActive:a}=de(o);return{stop:he(e,t,Oe(be({},s),{eventFilter:i})),pause:d,resume:c,isActive:a}}function Ne(e){var t;const r=f(e);return(t=r==null?void 0:r.$el)!=null?t:r}const j=x?window:void 0;function Ae(...e){let t,r,n,o;if(ce(e[0])?([r,n,o]=e,t=j):[t,r,n,o]=e,!t)return F;let s=F;const i=C(()=>Ne(t),c=>{s(),c&&(c.addEventListener(r,n,o),s=()=>{c.removeEventListener(r,n,o),s=F})},{immediate:!0,flush:"post"}),d=()=>{i(),s()};return T(d),d}const R=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},W="__vueuse_ssr_handlers__";R[W]=R[W]||{};const Pe=R[W];function $e(e,t){return Pe[e]||t}function Ee(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"||Array.isArray(e)?"object":Number.isNaN(e)?"any":"number"}const Fe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function Te(e,t,r,n={}){var o;const{flush:s="pre",deep:i=!0,listenToStorageChanges:d=!0,writeDefaults:c=!0,shallow:a,window:u=j,eventFilter:_,onError:p=l=>{console.error(l)}}=n,v=(a?K:w)(t);if(!r)try{r=$e("getDefaultStorage",()=>{var l;return(l=j)==null?void 0:l.localStorage})()}catch(l){p(l)}if(!r)return v;const m=f(t),A=Ee(m),g=(o=n.serializer)!=null?o:Fe[A],{pause:P,resume:$}=xe(v,()=>S(v.value),{flush:s,deep:i,eventFilter:_});return u&&d&&Ae(u,"storage",L),L(),v;function S(l){try{l==null?r.removeItem(e):r.setItem(e,g.write(l))}catch(h){p(h)}}function D(l){if(!(l&&l.key!==e)){P();try{const h=l?l.newValue:r.getItem(e);return h==null?(c&&m!==null&&r.setItem(e,g.write(m)),m):typeof h!="string"?h:g.read(h)}catch(h){p(h)}finally{$()}}}function L(l){l&&l.key!==e||(v.value=D(l))}}var H;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(H||(H={}));function je(e,t){const r=Object.keys(t).reduce((a,u)=>(a[u]={shown:0,errors:0},a),{}),n=Te(e,r);function o(){const a=[];Object.entries(n.value).forEach(([_,p])=>{const v=Math.max(10+p.errors-p.shown,1);a.push(...Array(v).fill(_))});const u=a[Math.floor(Math.random()*a.length)];return n.value[u].shown++,u}const s=K(o());function i(){let a=o();for(;a===f(s);)a=o();s.value=a}function d(){n.value[f(s)].errors++}const c=U(()=>Object.entries(n.value).map(([u,_])=>{const p=Math.max(10+_.errors-_.shown,1);return[u,p]}).sort((u,_)=>_[1]-u[1]));return{current:s,next:i,addError:d,rankedList:c}}const G=10;function Re(e,t){const r=w(e),{pause:n,resume:o,isActive:s}=pe(()=>{r.value-=G,r.value<=0&&(r.value=0,n(),t&&t())},G);function i(){r.value=e,o()}return{timeLeft:r,isActive:s,restart:i,pause:n,resume:o}}const We={},Ce={class:"mt-4 px-3 py-2 flex border-2 border-purple-600 rounded-md bg-purple-700 text-purple-50 hover:bg-purple-800"};function Ie(e,t){return b(),O("button",Ce,[ne(e.$slots,"default")])}var De=re(We,[["render",Ie]]);const Le={class:"text-xs text-slate-700"},Me={class:"flex gap-3"},ke=I("Stop Session"),ze=I("Start Session"),Je={class:"h-3 bg-purple-200 w-60 rounded-lg overflow-hidden mb-3"},Ve={key:0,class:"text-center mt-6 text-5xl text-slate-700"},Be=I(" Say: "),He={class:"font-medium"},Ue=se({__name:"Session",setup(e){const t=w(),{current:r,next:n,addError:o}=je("TALON",M),s=w(!1),i=w(!1),d=U(()=>M[f(r)]);async function c(){n(),g(),await z(),f(t).reset()}let a;async function u(){clearInterval(a),m(),await new Promise(S=>setTimeout(S,1e3)),i.value=!1,c()}function _(){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,c()},3e3)}const p=5e3,{isActive:v,pause:m,resume:A,restart:g,timeLeft:P}=Re(p,_);async function $(){s.value=!f(s),f(v)?m():A(),await z(),f(t).reset()}return m(),oe(()=>f(t).reset()),(S,D)=>(b(),O(E,null,[y("article",Le,[y("div",Me,[k(De,{onClick:$},{default:ae(()=>[s.value?(b(),O(E,{key:0},[ke],64)):(b(),O(E,{key:1},[ze],64))]),_:1})])]),k(Y,{ref_key:"boxRef",ref:t,character:f(r),onCorrectAnswer:u,disabled:!s.value},null,8,["character","disabled"]),y("div",Je,[y("div",{class:"h-3 bg-purple-800 origin-right",style:ie({transform:`scaleX(${f(P)/p})`})},null,4)]),i.value?(b(),O("aside",Ve,[Be,y("span",He,'"'+le(f(d))+'"',1)])):ue("",!0)],64))}});export{Ue as default};

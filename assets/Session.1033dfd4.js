import{D as g,S as $}from"./dictionary.9293dfca.js";import{u as B,a as V}from"./use-session.1e94b6ec.js";import{i as d,_ as W,o as c,c as i,r as D,d as F,j as K,k as L,u as e,a as u,b as m,w as S,p as M,t as O,q as Y,F as p,f,s as b}from"./index.2c13fe0b.js";import{_ as j}from"./QuestionBox.c9e47810.js";import{_ as q}from"./LinkButton.8b9ac3e5.js";const y=10;function z(r,s){const t=d(r),{pause:a,resume:l,isActive:o}=B(()=>{t.value-=y,t.value<=0&&(t.value=0,a(),s&&s())},y);function n(){t.value=r,l()}return{timeLeft:t,isActive:o,restart:n,pause:a,resume:l}}const G={},P={class:"mt-4 px-3 py-2 flex border-2 border-purple-600 rounded-md bg-purple-700 text-purple-50 hover:bg-purple-800"};function Q(r,s){return c(),i("button",P,[D(r.$slots,"default")])}var X=W(G,[["render",Q]]);const H={class:"flex gap-3"},J=f("Stop Session"),U=f("Start Session"),Z=f("Show Results"),ee={class:"h-3 bg-purple-200 w-60 rounded-lg overflow-hidden mb-3"},se={key:0,class:"text-center mt-6 text-5xl text-slate-700"},te=f(" Say: "),oe={class:"font-medium"},ue=F({__name:"Session",setup(r){const s=d(),{current:t,next:a,addError:l}=V($,g),o=d(!1),n=d(!1),A=K(()=>g[e(t)]);async function h(){a(),R(),await b(),e(s).reset()}let v;async function T(){clearInterval(v),_(),await new Promise(w=>setTimeout(w,1e3)),n.value=!1,h()}function k(){l(),n.value=!0,v=setTimeout(()=>{n.value=!1,h()},3e3)}const x=5e3,{isActive:C,pause:_,resume:N,restart:R,timeLeft:E}=z(x,k);async function I(){o.value=!e(o),e(C)?_():(a(),N()),await b(),e(s).reset()}return _(),L(()=>e(s).reset()),(w,ne)=>(c(),i(p,null,[u("div",H,[m(X,{onClick:I},{default:S(()=>[o.value?(c(),i(p,{key:0},[J],64)):(c(),i(p,{key:1},[U],64))]),_:1}),m(q,{to:"/session-result"},{default:S(()=>[Z]),_:1})]),m(j,{ref_key:"boxRef",ref:s,character:e(t),onCorrectAnswer:T,disabled:!o.value},null,8,["character","disabled"]),u("div",ee,[u("div",{class:"h-3 bg-purple-800 origin-right",style:M({transform:`scaleX(${e(E)/x})`})},null,4)]),n.value?(c(),i("aside",se,[te,u("span",oe,'"'+O(e(A))+'"',1)])):Y("",!0)],64))}});export{ue as default};
